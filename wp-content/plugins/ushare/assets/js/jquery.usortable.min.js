/*! Sortable 1.2.0 - MIT | git://github.com/rubaxa/Sortable.git */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(a,b){this.el=a,this.options=b=r({},b),a[I]=this;var c={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0};for(var e in c)!(e in b)&&(b[e]=c[e]);var f=b.group;f&&"object"==typeof f||(f=b.group={name:f}),["pull","put"].forEach(function(a){a in f||(f[a]=!0)}),b.groups=" "+f.name+(f.put.join?" "+f.put.join(" "):"")+" ";for(var h in this)"_"===h.charAt(0)&&(this[h]=d(this,this[h]));g(a,"mousedown",this._onTapStart),g(a,"touchstart",this._onTapStart),g(a,"dragover",this),g(a,"dragenter",this),R.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function c(a){u&&u.state!==a&&(j(u,"display",a?"none":""),!a&&u.state&&v.insertBefore(u,s),u.state=a)}function d(a,b){var c=Q.call(arguments,2);return b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(Q.call(arguments)))}}function e(a,b,c){if(a){c=c||K,b=b.split(".");var d=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g");do if(">*"===d&&a.parentNode===c||(""===d||a.nodeName.toUpperCase()==d)&&(!b.length||((" "+a.className+" ").match(e)||[]).length==b.length))return a;while(a!==c&&(a=a.parentNode))}return null}function f(a){a.dataTransfer.dropEffect="move",a.preventDefault()}function g(a,b,c){a.addEventListener(b,c,!1)}function h(a,b,c){a.removeEventListener(b,c,!1)}function i(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(H," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(H," ")}}function j(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return K.defaultView&&K.defaultView.getComputedStyle?c=K.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function k(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;f>e;e++)c(d[e],e);return d}return[]}function l(a){a.draggable=!1}function m(){N=!1}function n(a,b){var c=a.lastElementChild,d=c.getBoundingClientRect();return b.clientY-(d.top+d.height)>5&&c}function o(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function p(a){for(var b=0;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&b++;return b}function q(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,setTimeout(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function r(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G={},H=/\s+/g,I="Sortable"+(new Date).getTime(),J=window,K=J.document,L=J.parseInt,M=!!("draggable"in K.createElement("div")),N=!1,O=function(a,b,c,d,e,f,g){var h=K.createEvent("Event"),i=(a||b[I]).options,j="on"+c.charAt(0).toUpperCase()+c.substr(1);h.initEvent(c,!0,!0),h.item=d||b,h.from=e||b,h.clone=u,h.oldIndex=f,h.newIndex=g,i[j]&&i[j].call(a,h),b.dispatchEvent(h)},P=Math.abs,Q=[].slice,R=[],S=q(function(a,b,c){if(c&&b.scroll){var d,e,f,g,h=b.scrollSensitivity,i=b.scrollSpeed,j=a.clientX,k=a.clientY,l=window.innerWidth,m=window.innerHeight;if(y!==c&&(x=b.scroll,y=c,x===!0)){x=c;do if(x.offsetWidth<x.scrollWidth||x.offsetHeight<x.scrollHeight)break;while(x=x.parentNode)}x&&(d=x,e=x.getBoundingClientRect(),f=(P(e.right-j)<=h)-(P(e.left-j)<=h),g=(P(e.bottom-k)<=h)-(P(e.top-k)<=h)),f||g||(f=(h>=l-j)-(h>=j),g=(h>=m-k)-(h>=k),(f||g)&&(d=J)),(G.vx!==f||G.vy!==g||G.el!==d)&&(G.el=d,G.vx=f,G.vy=g,clearInterval(G.pid),d&&(G.pid=setInterval(function(){d===J?J.scrollTo(J.pageXOffset+f*i,J.pageYOffset+g*i):(g&&(d.scrollTop+=g*i),f&&(d.scrollLeft+=f*i))},24)))}},30);b.prototype={constructor:b,_onTapStart:function(a){var b=this,c=this.el,d=this.options,f=a.type,g=a.touches&&a.touches[0],h=(g||a).target,i=h,j=d.filter;if(!("mousedown"===f&&0!==a.button||d.disabled)&&(h=e(h,d.draggable,c))){if(B=p(h),"function"==typeof j){if(j.call(this,a,h,this))return O(b,i,"filter",h,c,B),void a.preventDefault()}else if(j&&(j=j.split(",").some(function(a){return a=e(i,a.trim(),c),a?(O(b,a,"filter",h,c,B),!0):void 0})))return void a.preventDefault();(!d.handle||e(i,d.handle,c))&&this._prepareDragStart(a,g,h)}},_prepareDragStart:function(a,b,c){var d,e=this,f=e.el,h=e.options,i=f.ownerDocument;c&&!s&&c.parentNode===f&&(E=a,v=f,s=c,w=s.nextSibling,D=h.group,d=function(){e._disableDelayedDrag(),s.draggable=!0,h.ignore.split(",").forEach(function(a){k(s,a.trim(),l)}),e._triggerDragStart(b)},g(i,"mouseup",e._onDrop),g(i,"touchend",e._onDrop),g(i,"touchcancel",e._onDrop),h.delay?(g(i,"mousemove",e._disableDelayedDrag),g(i,"touchmove",e._disableDelayedDrag),e._dragStartTimer=setTimeout(d,h.delay)):d())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),h(a,"mousemove",this._disableDelayedDrag),h(a,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(a){a?(E={target:s,clientX:a.clientX,clientY:a.clientY},this._onDragStart(E,"touch")):M?(g(s,"dragend",this),g(v,"dragstart",this._onDragStart)):this._onDragStart(E,!0);try{K.selection?K.selection.empty():window.getSelection().removeAllRanges()}catch(b){}},_dragStarted:function(){v&&s&&(i(s,this.options.ghostClass,!0),b.active=this,O(this,v,"start",s,v,B))},_emulateDragOver:function(){if(F){j(t,"display","none");var a=K.elementFromPoint(F.clientX,F.clientY),b=a,c=" "+this.options.group.name,d=R.length;if(b)do{if(b[I]&&b[I].options.groups.indexOf(c)>-1){for(;d--;)R[d]({clientX:F.clientX,clientY:F.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);j(t,"display","")}},_onTouchMove:function(a){if(E){var b=a.touches?a.touches[0]:a,c=b.clientX-E.clientX,d=b.clientY-E.clientY,e=a.touches?"translate3d("+c+"px,"+d+"px,0)":"translate("+c+"px,"+d+"px)";F=b,j(t,"webkitTransform",e),j(t,"mozTransform",e),j(t,"msTransform",e),j(t,"transform",e),a.preventDefault()}},_onDragStart:function(a,b){var c=a.dataTransfer,d=this.options;if(this._offUpEvents(),"clone"==D.pull&&(u=s.cloneNode(!0),j(u,"display","none"),v.insertBefore(u,s)),b){var e,f=s.getBoundingClientRect(),h=j(s);t=s.cloneNode(!0),j(t,"top",f.top-L(h.marginTop,10)),j(t,"left",f.left-L(h.marginLeft,10)),j(t,"width",f.width),j(t,"height",f.height),j(t,"opacity","0.8"),j(t,"position","fixed"),j(t,"zIndex","100000"),v.appendChild(t),e=t.getBoundingClientRect(),j(t,"width",2*f.width-e.width),j(t,"height",2*f.height-e.height),"touch"===b?(g(K,"touchmove",this._onTouchMove),g(K,"touchend",this._onDrop),g(K,"touchcancel",this._onDrop)):(g(K,"mousemove",this._onTouchMove),g(K,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else c&&(c.effectAllowed="move",d.setData&&d.setData.call(this,c,s)),g(K,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(a){var b,d,f,g=this.el,h=this.options,i=h.group,k=i.put,l=D===i,o=h.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!h.dragoverBubble&&a.stopPropagation()),D&&!h.disabled&&(l?o||(f=!v.contains(s)):D.pull&&k&&(D.name===i.name||k.indexOf&&~k.indexOf(D.name)))&&(void 0===a.rootEl||a.rootEl===this.el)){if(S(a,h,this.el),N)return;if(b=e(a.target,h.draggable,g),d=s.getBoundingClientRect(),f)return c(!0),void(u||w?v.insertBefore(s,u||w):o||v.appendChild(s));if(0===g.children.length||g.children[0]===t||g===a.target&&(b=n(g,a))){if(b){if(b.animated)return;q=b.getBoundingClientRect()}c(l),g.appendChild(s),this._animate(d,s),b&&this._animate(q,b)}else if(b&&!b.animated&&b!==s&&void 0!==b.parentNode[I]){z!==b&&(z=b,A=j(b));var p,q=b.getBoundingClientRect(),r=q.right-q.left,x=q.bottom-q.top,y=/left|right|inline/.test(A.cssFloat+A.display),B=b.offsetWidth>s.offsetWidth,C=b.offsetHeight>s.offsetHeight,E=(y?(a.clientX-q.left)/r:(a.clientY-q.top)/x)>.5,F=b.nextElementSibling;N=!0,setTimeout(m,30),c(l),p=y?b.previousElementSibling===s&&!B||E&&B:F!==s&&!C||E&&C,p&&!F?g.appendChild(s):b.parentNode.insertBefore(s,p?F:b),this._animate(d,s),this._animate(q,b)}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();j(b,"transition","none"),j(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,j(b,"transition","all "+c+"ms"),j(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=setTimeout(function(){j(b,"transition",""),j(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;h(K,"touchmove",this._onTouchMove),h(a,"mouseup",this._onDrop),h(a,"touchend",this._onDrop),h(a,"touchcancel",this._onDrop)},_onDrop:function(a){var c=this.el,d=this.options;clearInterval(this._loopId),clearInterval(G.pid),clearTimeout(this.dragStartTimer),h(K,"drop",this),h(K,"mousemove",this._onTouchMove),h(c,"dragstart",this._onDragStart),this._offUpEvents(),a&&(a.preventDefault(),!d.dropBubble&&a.stopPropagation(),t&&t.parentNode.removeChild(t),s&&(h(s,"dragend",this),l(s),i(s,this.options.ghostClass,!1),v!==s.parentNode?(C=p(s),O(null,s.parentNode,"sort",s,v,B,C),O(this,v,"sort",s,v,B,C),O(null,s.parentNode,"add",s,v,B,C),O(this,v,"remove",s,v,B,C)):(u&&u.parentNode.removeChild(u),s.nextSibling!==w&&(C=p(s),O(this,v,"update",s,v,B,C),O(this,v,"sort",s,v,B,C))),b.active&&O(this,v,"end",s,v,B,C)),v=s=t=w=u=x=y=E=F=z=A=D=b.active=null,this.save())},handleEvent:function(a){var b=a.type;"dragover"===b||"dragenter"===b?s&&(this._onDragOver(a),f(a)):("drop"===b||"dragend"===b)&&this._onDrop(a)},toArray:function(){for(var a,b=[],c=this.el.children,d=0,f=c.length,g=this.options;f>d;d++)a=c[d],e(a,g.draggable,this.el)&&b.push(a.getAttribute(g.dataIdAttr)||o(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){var f=c.children[d];e(f,this.options.draggable,c)&&(b[a]=f)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return e(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:void(c[a]=b)},destroy:function(){var a=this.el;a[I]=null,h(a,"mousedown",this._onTapStart),h(a,"touchstart",this._onTapStart),h(a,"dragover",this),h(a,"dragenter",this),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),R.splice(R.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},b.utils={on:g,off:h,css:j,find:k,bind:d,is:function(a,b){return!!e(a,b,a)},extend:r,throttle:q,closest:e,toggleClass:i,index:p},b.version="1.2.0",b.create=function(a,c){return new b(a,c)},a.fn.usortable=function(c){var d;return this.each(function(){var e=a(this),f=e.data("sortable");if(f||!(c instanceof Object)&&c||(f=new b(this,c),e.data("sortable",f)),f){if("widget"===c)return f;"destroy"===c?(f.destroy(),e.removeData("sortable")):c in f&&(d=f[f].apply(f,[].slice.call(arguments,1)))}}),void 0===d?this:d}});